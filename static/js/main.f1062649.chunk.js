(this["webpackJsonpwheres-waldo"]=this["webpackJsonpwheres-waldo"]||[]).push([[0],{23:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n.n(r),a=n(17),o=n.n(a),i=(n(23),n(6)),s=n(14),u={apiKey:"AIzaSyA7lyPyI42XBZIvt4c05DVfw87Tu-4IqZU",authDomain:"wheres-waldo-odin-jp.firebaseapp.com",projectId:"wheres-waldo-odin-jp",storageBucket:"wheres-waldo-odin-jp.appspot.com",messagingSenderId:"179199665105",appId:"1:179199665105:web:6e232fa769b6e39befb6f0"};s.a.initializeApp(u);var l=s.a,d=(n(16),n(1));var f=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=l.storage(),t=[];e.ref("to-find").list().then((function(e){var n=e.items.map((function(e){return t.push(e.name),e.getDownloadURL()}));return Promise.all(n)})).then((function(e){var n=e.map((function(e,n){return{url:e,name:t[n]}}));c(n)})).catch((function(e){console.log("Error retrieving images: ",e)}))}),[]),n.length>0?Object(d.jsx)("ul",{children:n.map((function(e,t){return Object(d.jsx)("li",{children:Object(d.jsx)("img",{src:e.url,alt:e.name})},t)}))}):Object(d.jsx)("p",{children:"Loading images..."})};var j=function(){var e=Object(r.useRef)(Date.now()),t=Object(r.useState)(e.current),n=Object(i.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){var e=setInterval((function(){a(Date.now())}),1e3);return function(){clearInterval(e)}}),[]),Object(d.jsx)("p",{children:Math.floor((c-e.current)/1e3)})};var m=function(e){return Object(d.jsxs)("header",{children:[Object(d.jsx)("h1",{children:e.gameEnded?"You Caught 'Em All!":"Gotta Catch 'Em All!"}),Object(d.jsx)("div",{className:"progress-bar",children:e.gameEnded?Object(d.jsx)(f,{}):!!e.gameStarted&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(f,{}),Object(d.jsx)(j,{})]})})]})},b=n(8),p=n.n(b),h=n(11);var x=function(e){return Object(d.jsxs)("div",{className:"start-screen",children:[Object(d.jsx)("p",{children:"Can you find and catch these Pok\xe9mon?"}),Object(d.jsx)("p",{children:"Click to capture."}),Object(d.jsx)(f,{}),Object(d.jsx)("button",{onClick:e.startGame,children:"Start"})]})},O=n(18);var v=function(e){var t=e.top,n=e.left;if(null!==t&&null!==n&&null===e.foundPokemon){var r=window.innerWidth>1e3?110:window.innerWidth/10+10;return t+=r/2,n+=r/2,Object(d.jsx)("div",{className:"dropdown-box",style:{top:t,left:n},children:Object(d.jsx)("ul",{onClick:e.handleClick,children:e.choices.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)("button",{id:e.id,children:e.name})},e.id)}))})})}return null};var g=function(e){var t=e.top,n=e.left;if(null!==t&&null!==n&&null===e.foundPokemon){var r=window.innerWidth>1e3?110:window.innerWidth/10+10;return t-=r/2,n-=r/2,Object(d.jsx)("div",{className:"target-box",style:{top:t,left:n}})}return null};var w=function(e){if(null!==e.foundPokemon){var t=e.foundPokemon?"You found ".concat(e.pokemonName,"!"):"That's not ".concat(e.pokemonName);return Object(d.jsx)("div",{className:"feedback-"+e.foundPokemon,style:{top:e.top,left:e.left},children:Object(d.jsx)("p",{children:t})})}return null};n(13);function k(e,t){var n=window.innerWidth>1e3?110:window.innerWidth/10+10,r=document.getElementById("main-image"),c=r.scrollWidth,a=r.scrollHeight,o=(e-n/2)/c,i=(e+n/2)/c,s=.2*window.innerHeight;return{xMin:o,xMax:i,yMin:(t-n/2-s)/a,yMax:(t+n/2-s)/a}}var y=function(e){var t=Object(r.useState)({x:null,y:null}),n=Object(i.a)(t,2),c=n[0],a=n[1],o=Object(r.useState)([]),s=Object(i.a)(o,2),u=s[0],f=s[1],j=Object(r.useState)({id:null,name:null}),m=Object(i.a)(j,2),b=m[0],x=m[1],y=Object(r.useState)(null),E=Object(i.a)(y,2),I=E[0],S=E[1],P=e.userId;return Object(r.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.firestore().collection("timestamps").doc(P).set({startTime:l.firestore.FieldValue.serverTimestamp()});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){l.storage().ref("main-image").list().then((function(e){return e.items[0].getDownloadURL()})).then((function(e){document.getElementById("main-image").src=e}))}),[]),Object(r.useEffect)((function(){l.firestore().collection("users").doc(P).get().then((function(e){var t=e.data(),n=[];for(var r in t)t[r].found||n.push({id:t[r].id,name:t[r].name});f(n)}))}),[c.x,c.y]),Object(r.useEffect)((function(){function t(){return(t=Object(h.a)(p.a.mark((function t(){var n,r,a,o,i,s,u,d,f,j,m,h,x,v,g,w;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=l.firestore(),t.next=4,n.collection("users").doc(P).get();case 4:if(r=t.sent,a=r.data(),o=a[b.id].coords,i=o.xMin,s=o.xMax,u=o.yMin,d=o.yMax,f=k(c.x,c.y),j=f.xMin,m=f.xMax,h=f.yMin,x=f.yMax,!(j>s||m<i||h>d||x<u)){t.next=12;break}S(!1),t.next=19;break;case 12:for(g in S(!0),v=!0,a)w=a[g].id,a[g].found||(w===b.id?n.collection("users").doc(P).update(Object(O.a)({},"".concat(w,".found"),!0)):v=!1);if(!v){t.next=19;break}return t.next=18,n.collection("timestamps").doc(P).set({endTime:l.firestore.FieldValue.serverTimestamp()},{merge:!0});case 18:e.endGame();case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))).apply(this,arguments)}b.id&&null===I&&function(){t.apply(this,arguments)}()})),Object(d.jsxs)("div",{className:"game-screen",children:[Object(d.jsx)(v,{top:c.y,left:c.x,choices:u,foundPokemon:I,handleClick:function(e){if("BUTTON"===e.target.tagName){var t=e.target.id,n=e.target.textContent;x({id:t,name:n})}else console.log("Please click a button")}}),Object(d.jsx)(g,{top:c.y,left:c.x,foundPokemon:I}),Object(d.jsx)(w,{top:c.y,left:c.x,foundPokemon:I,pokemonName:b.name}),Object(d.jsx)("img",{id:"main-image",onClick:function(e){var t=e.pageX,n=e.pageY;a({x:t,y:n}),f([]),x({id:null,name:null}),S(null)},src:"",alt:"All Pok\xe9mon from Generations I-VI"}),Object(d.jsx)("a",{href:"https://www.deviantart.com/viking011/art/Pokemon-Poster-436455502",target:"_blank",rel:"noreferrer",children:"Art by Viking011 on DeviantArt"})]})};var E=function(e){var t=Object(r.useState)(null),n=Object(i.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){function t(){return(t=Object(h.a)(p.a.mark((function t(){var n,r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.firestore(),t.next=3,n.collection("timestamps").doc(e.userId).get();case 3:r=t.sent,c=r.data(),a(c.endTime.seconds-c.startTime.seconds);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"Well done!"}),null!==c&&Object(d.jsxs)("p",{children:["It took you ",Object(d.jsx)("strong",{children:c})," seconds to catch them all."]})]})};var I=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){var n,r,c,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.firestore(),e.next=3,n.collection("toFind").doc("pokemonList").get();case 3:return r=e.sent,c=r.data(),e.next=7,n.collection("users").add(c);case 7:a=e.sent,t.current=a.id;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(d.jsx)("main",{children:e.gameEnded?Object(d.jsx)(E,{userId:t.current}):e.gameStarted?Object(d.jsx)(y,{endGame:e.endGame,userId:t.current}):Object(d.jsx)(x,{startGame:e.startGame})})};n(27);var S=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),o=Object(i.a)(a,2),s=o[0],u=o[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m,{gameStarted:n,gameEnded:s}),Object(d.jsx)(I,{gameStarted:n,gameEnded:s,startGame:function(){c(!0)},endGame:function(){u(!0)}})]})};o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.f1062649.chunk.js.map