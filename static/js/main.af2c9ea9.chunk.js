(this["webpackJsonpwheres-waldo"]=this["webpackJsonpwheres-waldo"]||[]).push([[0],{23:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n.n(c),r=n(18),o=n.n(r),i=(n(23),n(6)),s=n(13),l={apiKey:"AIzaSyA7lyPyI42XBZIvt4c05DVfw87Tu-4IqZU",authDomain:"wheres-waldo-odin-jp.firebaseapp.com",projectId:"wheres-waldo-odin-jp",storageBucket:"wheres-waldo-odin-jp.appspot.com",messagingSenderId:"179199665105",appId:"1:179199665105:web:6e232fa769b6e39befb6f0"};s.a.initializeApp(l);var u=s.a,d=(n(16),n(1));var j=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e=u.storage(),t=[];e.ref("to-find").list().then((function(e){var n=e.items.map((function(e){return t.push(e.name),e.getDownloadURL()}));return Promise.all(n)})).then((function(e){var n=e.map((function(e,n){return{url:e,name:t[n]}}));a(n)})).catch((function(e){console.log("Error retrieving images: ",e)}))}),[]),n.length>0?Object(d.jsx)("ul",{children:n.map((function(e,t){return Object(d.jsx)("li",{children:Object(d.jsx)("img",{src:e.url,alt:e.name})},t)}))}):Object(d.jsx)("p",{children:"Loading images..."})};var f=function(){var e=Object(c.useRef)(Date.now()),t=Object(c.useState)(e.current),n=Object(i.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){var e=setInterval((function(){r(Date.now())}),1e3);return function(){clearInterval(e)}}),[]),Object(d.jsx)("p",{children:Math.floor((a-e.current)/1e3)})};var m=function(e){return Object(d.jsxs)("header",{children:[Object(d.jsx)("h1",{children:e.gameEnded?"You Caught 'Em All!":"Gotta Catch 'Em All!"}),Object(d.jsx)("div",{className:"progress-bar",children:e.gameEnded?Object(d.jsx)(j,{}):!!e.gameStarted&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j,{}),Object(d.jsx)(f,{})]})})]})};var b=function(e){return Object(d.jsxs)("div",{className:"start-screen",children:[Object(d.jsx)("p",{children:"Can you find and catch these Pok\xe9mon?"}),Object(d.jsx)("p",{children:"Click to capture."}),Object(d.jsx)(j,{}),Object(d.jsx)("button",{onClick:e.startGame,children:"Start"})]})},h=n(10),p=n.n(h),O=n(11),x=n(14);var g=function(e){var t=e.top,n=e.left;if(null!==t&&null!==n&&null===e.foundPokemon){var c=window.innerWidth>1e3?110:window.innerWidth/10+10;return t+=c/2,n+=c/2,Object(d.jsx)("div",{className:"dropdown-box",style:{top:t,left:n},children:Object(d.jsx)("ul",{onClick:e.handleClick,children:e.choices.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)("button",{id:e.id,children:e.name})},e.id)}))})})}return null};var v=function(e){var t=e.top,n=e.left;if(null!==t&&null!==n&&null===e.foundPokemon){var c=window.innerWidth>1e3?110:window.innerWidth/10+10;return t-=c/2,n-=c/2,Object(d.jsx)("div",{className:"target-box",style:{top:t,left:n}})}return null};var k=function(e){if(null!==e.foundPokemon){var t=e.foundPokemon?"You found ".concat(e.pokemonName,"!"):"That's not ".concat(e.pokemonName);return Object(d.jsx)("div",{className:"feedback-"+e.foundPokemon,style:{top:e.top,left:e.left},children:Object(d.jsx)("p",{children:t})})}return null};n(17);var w=function(e){var t=Object(c.useState)({x:null,y:null}),n=Object(i.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)([]),s=Object(i.a)(o,2),l=s[0],j=s[1],f=Object(c.useState)({id:null,name:null}),m=Object(i.a)(f,2),b=m[0],h=m[1],w=Object(c.useState)(null),y=Object(i.a)(w,2),E=y[0],S=y[1];return Object(c.useEffect)((function(){var e=u.firestore();e.collection("toFind").doc("pokemonList").get().then((function(t){var n=t.data();for(var c in n)e.collection("toFind").doc("pokemonList").update(Object(x.a)({},"".concat(c,".found"),!1))}))}),[]),Object(c.useEffect)((function(){u.firestore().collection("timer").doc("timestamps").set({startTime:u.firestore.FieldValue.serverTimestamp()})}),[]),Object(c.useEffect)((function(){u.storage().ref("main-image").list().then((function(e){return e.items[0].getDownloadURL()})).then((function(e){document.getElementById("main-image").src=e}))}),[]),Object(c.useEffect)((function(){u.firestore().collection("toFind").doc("pokemonList").get().then((function(e){var t=e.data(),n=[];for(var c in t)t[c].found||n.push({id:t[c].id,name:t[c].name});j(n)}))}),[a.x,a.y]),Object(c.useEffect)((function(){function t(){return(t=Object(O.a)(p.a.mark((function t(){var n,c,r,o,i,s,l,d,j,f,m,h,O,g,v,k,w,y,E,I;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=u.firestore(),t.next=4,n.collection("toFind").doc("pokemonList").get();case 4:if(c=t.sent,r=c.data(),o=r[b.id].coords,i=o.xMin,s=o.xMax,l=o.yMin,d=o.yMax,j=window.innerWidth>1e3?110:window.innerWidth/10+10,f=document.getElementById("main-image"),m=f.scrollWidth,h=f.scrollHeight,O=(a.x-j/2)/m,g=(a.x+j/2)/m,v=.2*window.innerHeight,k=(a.y-j/2-v)/h,w=(a.y+j/2-v)/h,!(O>s||g<i||k>d||w<l)){t.next=20;break}S(!1),t.next=27;break;case 20:for(E in S(!0),y=!0,r)I=r[E].id,r[E].found||(I===b.id?n.collection("toFind").doc("pokemonList").update(Object(x.a)({},"".concat(I,".found"),!0)):y=!1);if(!y){t.next=27;break}return t.next=26,n.collection("timer").doc("timestamps").set({endTime:u.firestore.FieldValue.serverTimestamp()},{merge:!0});case 26:e.endGame();case 27:t.next=32;break;case 29:t.prev=29,t.t0=t.catch(0),console.log(t.t0);case 32:case"end":return t.stop()}}),t,null,[[0,29]])})))).apply(this,arguments)}b.id&&null===E&&function(){t.apply(this,arguments)}()})),Object(d.jsxs)("div",{className:"game-screen",children:[Object(d.jsx)(g,{top:a.y,left:a.x,choices:l,foundPokemon:E,handleClick:function(e){if("BUTTON"===e.target.tagName){var t=e.target.id,n=e.target.textContent;h({id:t,name:n})}else console.log("Please click a button")}}),Object(d.jsx)(v,{top:a.y,left:a.x,foundPokemon:E}),Object(d.jsx)(k,{top:a.y,left:a.x,foundPokemon:E,pokemonName:b.name}),Object(d.jsx)("img",{id:"main-image",onClick:function(e){var t=e.pageX,n=e.pageY;r({x:t,y:n}),j([]),h({id:null,name:null}),S(null)},src:"",alt:"All Pok\xe9mon from Generations I-VI"}),Object(d.jsx)("a",{href:"https://www.deviantart.com/viking011/art/Pokemon-Poster-436455502",target:"_blank",rel:"noreferrer",children:"Art by Viking011 on DeviantArt"})]})};var y=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){function e(){return(e=Object(O.a)(p.a.mark((function e(){var t,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.firestore(),e.next=3,t.collection("timer").doc("timestamps").get();case 3:n=e.sent,c=n.data(),a(c.endTime.seconds-c.startTime.seconds);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"Congratulations!"}),null!==n&&Object(d.jsxs)("p",{children:["It took you ",Object(d.jsx)("strong",{children:n})," seconds to catch them all."]})]})};var E=function(e){return Object(d.jsx)("main",{children:e.gameEnded?Object(d.jsx)(y,{}):e.gameStarted?Object(d.jsx)(w,{endGame:e.endGame}):Object(d.jsx)(b,{startGame:e.startGame})})};n(27);var S=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),o=Object(i.a)(r,2),s=o[0],l=o[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m,{gameStarted:n,gameEnded:s}),Object(d.jsx)(E,{gameStarted:n,gameEnded:s,startGame:function(){a(!0)},endGame:function(){l(!0)}})]})};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.af2c9ea9.chunk.js.map